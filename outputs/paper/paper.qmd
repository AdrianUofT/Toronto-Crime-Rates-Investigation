---
title: "Is Crime Really On A Rise In Toronto? An Analysis of The Past And Current Crime Rates of Toronto"
author: 
  - Adrian Ly
thanks: "Code and data analysis are available at: https://github.com/AdrianUofT/Toronto-Crime-Rates-Investigation.git"
date: today
date-format: long
abstract: "Current mainstream news outlets are pushing a narrative that crime in Toronto is on a rise. Overall crime rates when looking from a macro scale perspective does seem to be increasing on average of about 0.43%, with the micro scale showcasing some crimes such as homicide to have an increase of almost 180%. Using data from OpenDataToronto, this paper serves to present an unbiased review of the current crime rates in Toronto and to reduce any fearmongering that may occur when someone reads a headline. This paper reveals that while crime is technically on a rise, this \"increase\" in crime rate does not necessairly correlate to something worth pointing out."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(knitr)
library(janitor)
library(lubridate)
library(opendatatoronto)
library(tidyverse)
library(dplyr)
```

# Introduction

You can and should cross-reference sections and sub-sections.

The remainder of this paper is structured as follows. @sec-data....

# Data {#sec-data}

The data utilized throughout this paper was obtained through the City of Toronto's OpenDataToronto [@citeOpenDataToronto]. The specific data set that was used is entitled 'Neighbourhood Crime Rates, 2023' [@citeData]. Data was collected and analyzed through the statistical program 'R' [@citeR]


# Model

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.

$$
\text{Percentage Change} = \left( \frac{\text{New Value} - \text{Old Value}}{\text{Old Value}} \right) \times 100
$$

```{=tex}
\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}
```
We run the model in R [@citeR] using the `rstanarm` package of . We use the default priors from `rstanarm`.

### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.

# Results

Our results are summarized in @fig-avgcrimerates.

```{r}
#| label: fig-avgcrimerates
#| fig-cap: Average Crime Rates
#| echo: false
#| message: false

# Reading the data

average_crime_rates_per_year <- read_csv(here::here("outputs/data/average_crime_rates_data.csv"))

# Creating the line graph for average crime rates
ggplot(average_crime_rates_per_year, aes(x = year, y = average_rate, color = crime)) +
  geom_line() +
  labs(title = "Average Crime Rates by Type Across Years (2014-2023)",
       x = "Year",
       y = "Average Crime Rate",
       color = "Crime Type") +
  theme_minimal()
```

```{r}
#| label: fig-percentagecrimerates
#| fig-cap: Average Crime Rates
#| echo: false
#| message: false

# Reading the data
percentage_change_data <- read_csv(here::here("outputs/data/percentage_change_data.csv"))

# Creating the line graph for percentage changes
ggplot(percentage_change_data, aes(x = year, y = percentage_change, color = crime)) +
  geom_line() +
  labs(title = "Yearly Percentage Change in Average Crime Rates by Type (2014-2023)",
       x = "Year",
       y = "Percentage Change in Average Rate",
       color = "Crime Type") +
  theme_minimal()
```

```{r}
#| echo: false
#| eval: true
#| label: tbl-percentagecrimerates20142023
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false

# Reading the data
final_percentage_change_table <- read.csv(here::here("outputs/data/percentage_change_table_2014_2023.csv"))

colnames(final_percentage_change_table) <- c("X", "Crime", "Percentage Change")

final_percentage_change_table |> select("Crime", "Percentage Change") |> kable()
```

```{r}
#| echo: false
#| eval: true
#| label: tbl-percentagecrimerates20222023
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false

percentage_change_table <- read.csv(here::here("outputs/data/percentage_change_table_2022_2023.csv"))

colnames(percentage_change_table) <- c("X", "Crime", "Percentage Change")
percentage_change_table |> select("Crime", "Percentage Change") |> kable()
```

# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this.

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {.unnumbered}

# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In we implement a posterior predictive check. This shows...

In we compare the posterior with the prior. This shows...

## Diagnostics

is a trace plot. It shows... This suggests...

is a Rhat plot. It shows... This suggests...

\newpage

# References
